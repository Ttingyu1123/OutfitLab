# OutfitLab

## ✨ OutfitLab - 您的個人 AI 穿搭實驗室

歡迎來到 **OutfitLab**！這是一個結合最先進生成式 AI 技術的時尚實驗平台。無需繁瑣的更衣，無需專業的攝影棚，只要動動手指，您就能看見不同風格的自己。無論是日常穿搭靈感、電商模特兒圖生成，或是單純的創意探索，OutfitLab 都能滿足您的想像。

---

## 🌟 核心功能亮點

1. **AI 虛擬試穿 (Virtual Try-On)**：上傳您的照片與想試穿的衣服（或是用文字描述），AI 會自動將衣服「穿」在您身上，並自然地貼合身形與光影。
2. **智能改色 (Recolor)**：喜歡這件外套但想要別的顏色？透過取色器與材質保留技術，精準改變單品顏色而不失真。
3. **魔法修圖 (Magic Edit)**：想換個髮色？想戴上墨鏡？輸入文字指令，AI 幫您局部修改照片細節。
4. **單品提取 (Extract)**：看到一張好看的全身照，想把裡面的「外套」單獨拿出來做搭配？一鍵自動去背提取。
5. **AI 穿搭顧問**：不知道怎麼穿？上傳照片，讓 AI 分析您的風格並給出專業建議。

---

## 📖 使用教學指南

OutfitLab 的介面設計直觀，分為三個主要區塊（由左至右）：

### 第一步：設定模特兒 (Column 1)

這是您的畫布與基礎。

1. **上傳照片**：上傳一張全身或半身的人物照片。建議光線清晰、無遮擋。
2. **AI 穿搭顧問點評**：點擊 ✨ AI 穿搭顧問點評，系統會分析照片中的穿搭風格，並在下方推薦適合的單品（可直接加入試穿清單）。
3. **AI 工具箱 (進階修圖)**：
   - **提取單品 (Extract)**：選擇部位（如上衣、褲子），系統會將該物品單獨扣出，您可以將其「加入穿搭清單」進行混搭。
   - **魔法修圖 (Edit)**：輸入指令（例：「把頭髮染成粉紅色」、「移除眼鏡」），生成新照片。
   - **智能改色 (Recolor)**：
     - 輸入目標（例：「外套」）。
     - 使用 **取色器** 選擇顏色，或輸入文字（例：「金屬銀色」）。
     - AI 會在保留原本衣服皺褶與材質的前提下進行改色。
   - 小撇步：修圖或改色滿意後，在右側結果區點擊「設為模特兒」，即可用新照片繼續進行試穿。

### 第二步：打造穿搭 (Column 2)

這是您的衣帽間，決定要試穿什麼。

1. **加入單品**：
   - **圖片上傳**：上傳衣服的平拍圖或模特圖。
   - **文字描述**：沒有圖片？直接輸入（例：「一件紅色的絲綢晚禮服」），AI 會為您生成並穿上。
   - **快速風格**：使用上方的風格標籤（如：賽博龐克、都會職場）快速套用整套風格。
2. **管理清單**：您可以同時加入多件單品（例如：一件上傳的夾克 + 一件文字描述的牛仔褲）。記得為單品選擇正確的分類（上衣、褲子、裙子等），以利 AI 判斷層次。
3. **背景設定**：
   - **保留原背景**：最自然的選擇。
   - **專業棚拍/真實場景**：想瞬間移動到「極簡白棚」或是「巴黎街頭」？從下拉選單選擇，AI 會自動調整光影讓合成更逼真。
   - **我要許願**：輸入自訂場景（例：「充滿螢火蟲的魔法森林」）。

### 第三步：生成與成果 (Column 3)

見證奇蹟的時刻。

1. **開始合成**：確認左側設定無誤後，點擊中間下方的 **開始合成 (Mix & Match)**。
2. **檢視成果**：
   - **放大預覽**：點擊圖片可查看高畫質細節。
   - **按住比對**：按住圖片不放，可快速切換查看「修改前」與「修改後」的差異。
3. **下載與應用**：
   - **下載單圖**：儲存生成的結果。
   - **下載拼圖**：生成一張包含「原圖」與「結果圖」的對比拼圖，適合分享到社群媒體。
   - **設為模特兒**：將這個成果變成新的「模特兒」，您可以以此為基礎繼續疊加其他飾品或修改。

---

## 💡 達人技巧 (Pro Tips)

- **層次感**：在穿搭清單中，AI 會嘗試理解衣物邏輯。如果您同時放入「襯衫」和「外套」，AI 通常會正確地將外套穿在外面。
- **從提取到試穿**：您可以先上傳一張時尚雜誌的圖，使用「提取單品」把模特的裙子拿出來，然後再上傳自己的照片，把那條裙子「試穿」在自己身上。
- **精準改色**：使用「智能改色」時，除了選顏色，也可以在文字框補充材質描述（例如選了藍色，文字補充「牛仔布材質」），效果會更驚人。

---

## 開發環境需求

- Node.js 20+
- npm 10+

## 本機啟動

1. 安裝套件

```bash
npm install
```

2. 啟動開發模式

```bash
npm run dev
```

3. 檢查型別與建置

```bash
npm run typecheck
npm run build
```

## GitHub Actions 自動部署（GitHub Pages）

專案已包含 workflow：`.github/workflows/deploy-pages.yml`

觸發方式：
- push 到 `main`
- 手動執行（`workflow_dispatch`）

GitHub 設定：
1. 進入 `Settings > Pages`
2. `Source` 選擇 `GitHub Actions`

## API Key（BYOK）使用方式與注意事項

1. 進入 app 後，先輸入 Gemini API Key（`AIza...`）。
2. 可先按「測試 key 有效性」驗證後再儲存。
3. 金鑰僅儲存在瀏覽器端（`localStorage`），不會上傳到本專案伺服器。
4. 右上角 Home 旁有 API Key 圖示按鈕，可隨時查看狀態、更新或清除。
5. 若模型呼叫回傳 `401/403`，系統會清除失效 key 並要求重新設定。

安全建議：
- 不要把 API Key 寫入程式碼、`.env` 或任何 git commit。
- 請勿分享含 key 的螢幕截圖與錯誤日誌。

## .gitignore 原則

已排除常見不需提交或敏感項目：
- `node_modules/`, `dist/`, `coverage/`
- `.env`, `.env.*`（保留 `!.env.example`）
- 系統暫存與編輯器檔（如 `.DS_Store`, `Thumbs.db`）

若曾誤提交敏感檔案，先從追蹤移除：

```bash
git rm --cached .env.local
```
